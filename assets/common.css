/* =========================================
   FIXLAG.ART  共通スタイル  (2025-08-18)
   - ダーク基調 / 変数
   - レイアウト: サイドナビ / コンテンツ
   - サブナブ（横帯）
   - カード / ページ見出し
   - フッター（法的文言）
   - ハンバーガー＝オフキャンバス実装
   ========================================= */

/* ---------- CSS Variables ---------- */
:root{
  --bg: #0f1215;
  --panel: #171a1f;
  --panel-2: #1e232a;
  --text: #e6ebf0;
  --muted: #9aa6b2;
  --line: #2b323b;
  --brand: #2b6c84;
  --accent: #3aa2cc;
  --pill-bg: #1d232a;
  --pill-on: #e8f2f7;
  --pill-on-text: #0f2a35;
  --shadow: 0 6px 20px rgba(0,0,0,.35);
  --radius: 12px;
  --radius-lg: 14px;
  --nav-w: 112px;       /* デスクトップの縦帯幅 */
  --z-scrim: 1100;      /* オーバーレイ */
  --z-sidenav: 1110;    /* サイドナビ（スクラムより上） */
  --z-subnav: 100;      /* 横帯（本文上） */
}

/* ---------- Reset / Base ---------- */
*{ box-sizing: border-box; }
html,body{ height:100%; }
html{ color-scheme: dark; }
body{
  margin:0;
  font: 15px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Hiragino Sans","Noto Sans JP","Noto Sans CJK JP",Meiryo,sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden; /* スライド時のはみ出しを抑止 */
}

/* ---------- Layout ---------- */
.layout{
  display:flex;
  min-height:100dvh;
}

/* --- Side Nav (desktop base) --- */
.sidenav{
  width: var(--nav-w);
  flex: 0 0 var(--nav-w);
  background: linear-gradient(180deg, #0f1418, #0d1115);
  border-right: 1px solid var(--line);
  position: sticky;
  top: 0;
  height: 100dvh;
  padding: 20px 14px;
  pointer-events: auto; /* クリック可 */
}

.sidenav .logo{
  font-weight: 800;
  letter-spacing: .4px;
  margin: 2px 4px 16px;
}

.sidenav a{
  display:block;
  padding: 12px 10px;
  margin: 2px 0;
  border-radius: 10px;
  color: var(--text);
  text-decoration: none;
  transition: background .15s ease, color .15s ease;
}
.sidenav a:hover{ background: #1a2128; }
.sidenav a.active{ background: #22313a; outline:1px solid #2f4955; }

.sidenav .sep{ height:1px; margin: 12px 2px; background: var(--line); }

/* --- Content --- */
.content{
  flex:1;
  min-width:0;
  padding: 18px 18px 32px;
}

/* コンテナ幅 */
.page{ max-width: 980px; margin: 0 auto; }

/* ---------- Page header ---------- */
.page h1{
  font-size: 28px;
  margin: 6px 0 12px;
  letter-spacing:.2px;
}

/* リード（導入文） */
.lead{ font-size: 16px; color: var(--text); }

/* ---------- Card ---------- */
.card{
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 12px;
  box-shadow: var(--shadow);
}

/* ---------- Subnav (横帯) ---------- */
.subnav{
  position: sticky;
  top: 0; /* ナビの下に固定 */
  z-index: var(--z-subnav);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  padding: 8px 0 10px;
}

.subnav a{
  display: inline-flex;
  align-items:center;
  gap:8px;
  padding: 6px 12px;
  margin-right: 8px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: var(--pill-bg);
  color: var(--text);
  text-decoration: none;
  font-weight: 600;
  transition: background .15s ease, color .15s ease, border-color .15s ease;
}
.subnav a:hover{ background: #232a33; border-color: #364351; }
.subnav a.active{
  background: var(--pill-on);
  color: var(--pill-on-text);
  border-color: #bcd8e6;
}

/* ---------- Footer (legal) ---------- */
.site-footer{
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--radius);
  padding: 12px;
  margin-top: 16px;
}
.site-footer ul{ margin: 0 0 8px 0; padding-left: 1.25rem; }
.site-footer li{ margin:.2rem 0; }
.site-footer p{ margin:.5rem 0 0; color: var(--muted); font-size: .95rem; }

/* ---------- Pills / Small UI ---------- */
.button-pill{
  display:inline-flex; align-items:center;
  gap:6px; padding:6px 12px;
  background: var(--pill-bg);
  border:1px solid var(--line);
  color: var(--text);
  text-decoration:none;
  border-radius:999px;
}
.button-pill.active{ background: var(--pill-on); color: var(--pill-on-text); border-color:#bcd8e6; }

/* =========================================================
   Drawer (Hamburger) — mobile / narrow width
   - body に .is-drawer-open を付与して開閉（design.js）
   - オーバーレイ .sidenav-overlay は body 直下
   - z-index の序列: overlay(1100) < sidenav(1110)
   ========================================================= */
.nav-toggle{
  position: fixed;
  top: 12px; left: 12px;
  z-index: var(--z-sidenav);
  width: 36px; height: 36px;
  border-radius: 999px;
  display: none; /* デスクトップでは隠す */
  align-items:center; justify-content:center;
  background: #12161a;
  border: 1px solid var(--line);
  color: var(--text);
}

.sidenav-overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: var(--z-scrim);
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease;
}

/* モバイル：縦帯をオフキャンバス化 */
@media (max-width: 960px){
  .nav-toggle{ display:inline-flex; }

  .sidenav{
    position: fixed !important;
    left: 0; top: 0;
    height: 100dvh;
    transform: translateX(-100%);
    transition: transform .22s ease;
    z-index: var(--z-sidenav) !important; /* クリック可能を保証 */
  }

  body.is-drawer-open .sidenav{ transform: translateX(0); }

  /* オーバーレイの出現 */
  body.is-drawer-open .sidenav-overlay{
    opacity: 1;
    pointer-events: auto;
  }

  /* コンテンツ余白（縦帯が fixed になるので全幅） */
  .content{ padding: 58px 14px 28px; }

  .sidenav .logo{ margin-left: 6px; }
  .subnav{ padding: 8px 0; }
  .page{ max-width: 720px; }
}

/* ---------- Links / misc ---------- */
a{ color: #9bd0ea; }
a:hover{ color: #c2e6f7; }

/* ---------- Prefers reduced motion ---------- */
@media (prefers-reduced-motion: reduce){
  *, *::before, *::after{
    animation-duration: .01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: .01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ---------- Helper (debug) ---------- */
/* .debug-outline *{ outline:1px solid #f0f; } */
